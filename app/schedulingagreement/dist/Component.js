sap.ui.define(["sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/odata/ODataModel","sap/ui/core/routing/HashChanger","sap/fiori/schedulingagreement/model/models","sap/fiori/schedulingagreement/controller/formatter"],function(e,a,s,t,i){"use strict";return e.extend("sap.fiori.schedulingagreement.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);var t=window.location.href.includes("site")?"/":"";var r=jQuery.sap.getModulePath("sap/fiori/schedulingagreement");r=r==="."?"":r;var o=r+t+this.getMetadata().getManifestEntry("sap.app").dataSources.mainService.uri;var n=new s(o,true);n.attachMetadataFailed(e=>{var s=e.getParameter("response").body;if(s.indexOf("<?xml")!==-1){a.error($($.parseXML(s)).find("message").text())}else{a.error(s)}});n.attachMetadataLoaded(()=>{this.setModel(n);sap.ui.getCore().setModel(n,"oDataModel");n.setDefaultCountMode("None");var e=new sap.ui.model.json.JSONModel;sap.ui.getCore().setModel(e,"pItemModel");this.setModel(i.createDeviceModel(),"device");var a=window.location.href.includes("site");if(a){$.ajax({url:r+t+"user-api/attributes",type:"GET",success:e=>{if(!sessionStorage.getItem("AddressCodeSA")){if(e.email==="manishgupta8@kpmg.com"||e.email==="swetamohanty1@kpmg.com"||e.email==="mohsinahmad@kpmg.com"||e.email==="rishabhyadav3@kpmg.com"||e.email==="vikrantnanda@kpmg.com"){sessionStorage.setItem("AddressCodeSA","JSE-01-01")}else{sessionStorage.setItem("AddressCodeSA",e.login_name[0])}}this.setHeaders(e.login_name[0],e.type[0].substring(0,1).toUpperCase())}})}else{this.setHeaders("RA046 ","E")}});n.attachRequestFailed(e=>{var s=e.getParameter("responseText");if(s.indexOf("<?xml")!==-1){a.error($($.parseXML(s)).find("message").text())}else{a.error(JSON.parse(s).error.message.value)}})},setHeaders:function(e,a){this.getModel().setHeaders({loginId:e,loginType:a});t.getInstance().replaceHash("");this.getRouter().initialize();jQuery.sap.includeScript("https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.0/jszip.js");jQuery.sap.includeScript("https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.0/xlsx.js")}})});